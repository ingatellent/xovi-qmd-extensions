AFFECT [[1224665461898798997]]
IMPORT net.rmitchellscott.RmStylus [[180922.180921]]
TRAVERSE ?#[[6504254477]]
LOCATE AFTER ALL
INSERT {
property ~&6503679477&~ buttonWasHeld: ~&214625660372&~
property ~&6503679477&~ penWasChanged: ~&214625660372&~
property ~&197102514&~ rmLastUsedTool
property ~&197102514&~ rmToolBeforeSelect
property ~&197102514&~ rmLastUsedEraser

        RmStylus {
            onButtonPressed: {
                
                buttonWasHeld = ~&214625660372&~;
                holdTimer.~&233743006639214&~();
                
                ~&5972376&~(!penWasChanged) {
                    rmLastUsedTool = ~&7842069035455457876&~.~&8399230650759060099&~;
                    rmLastUsedEraser = ~&7842069035455457876&~.~&254528381676974702&~.~&6504326343&~;
                    penWasChanged = ~&6504329801&~;
                }

                ~&233745975898428&~.~&5107434981825242642&~(8);
                ~&7842069035455457876&~.~&8399230650759060099&~ = ~&"7082627422347&~;

                multipleClickTimer.pressCount++;
                multipleClickTimer.~&233743006639214&~();
            }

            onButtonReleased: {
                holdTimer.~&6504295855&~()
                ~&5972376&~ (!penWasChanged) ~&7083121450889&~;
                ~&233745975898428&~.~&5107434981825242642&~(rmLastUsedEraser);
                ~&5972376&~(rmLastUsedTool === ~&"233740920352621&~ || rmLastUsedTool === ~&"254547519794454865&~) {
                    ~&214622607920&~ ~&496507533367307312&~ = rmLastUsedTool === ~&"254547519794454865&~ ? ~&"254547519794454865&~ : ~&"233740920352621&~;
                    ~&7842069035455457876&~.~&8399230650759060099&~ = ~&496507533367307312&~;
                    ~&233745975898428&~.~&254547531013823564&~(~&496507533367307312&~);
                } ~&6503784146&~ {
                     ~&7842069035455457876&~.~&16536305558539704146&~.~&6504326343&~ = ~&6502882289&~.~&12710273036866530829&~;
                     ~&7842069035455457876&~.~&8399230650759060099&~ = ~&"254547531013851119&~;
                     ~&233745975898428&~.~&3352491319205423503&~();
                }

                penWasChanged = ~&214625660372&~;
            }

        }

        ~&214604601930&~ {
            ~&5972374&~: multipleClickTimer
            property ~&197088788&~ pressCount: 0
            ~&7713147298280334&~: 300
            ~&233743626668842&~: ~&214625660372&~
            ~&7083121289162&~: ~&214625660372&~
            ~&495358363329399331&~: {
                ~&8881206197413053810&~();
                ~&214640042348&~();
            }

            function ~&214640042348&~() {
                pressCount = 0;
            }



            function ~&8881206197413053810&~() {

                ~&5972376&~ (pressCount === 1 && !buttonWasHeld) {
                    ~&5972376&~ (rmLastUsedTool === ~&"254547531013851119&~) {
                        ~&197102514&~ ~&496507533367307312&~ = rmToolBeforeSelect=== ~&"254547519794454865&~ ? ~&"254547519794454865&~ : ~&"233740920352621&~;

                        ~&7842069035455457876&~.~&8399230650759060099&~ = ~&496507533367307312&~;
                        ~&233745975898428&~.~&254547531013823564&~(~&496507533367307312&~);
                    } ~&6503784146&~ {
                        rmToolBeforeSelect = ~&7842069035455457876&~.~&8399230650759060099&~;
                        ~&7842069035455457876&~.~&16536305558539704146&~.~&6504326343&~ = ~&6502882289&~.~&12710273036866530829&~;
                        ~&7842069035455457876&~.~&8399230650759060099&~ = ~&"254547531013851119&~;
                        ~&233745975898428&~.~&3352491319205423503&~();
                    }
                    penWasChanged = ~&214625660372&~;

                } ~&6503784146&~ ~&5972376&~ (pressCount === 2 && !buttonWasHeld) {
                    ~&197102514&~ ~&496507533367307312&~ = ~&7842069035455457876&~.~&8399230650759060099&~ === ~&"254547531013851119&~ && rmToolBeforeSelect === ~&"233740920352621&~ || ~&7842069035455457876&~.~&8399230650759060099&~ === ~&"254547519794454865&~ ? ~&"233740920352621&~ : ~&"254547519794454865&~;
                    ~&7842069035455457876&~.~&8399230650759060099&~ = ~&496507533367307312&~;
                    ~&233745975898428&~.~&254547531013823564&~(~&496507533367307312&~);
                    penWasChanged = ~&214625660372&~;

                } ~&6503784146&~ ~&5972376&~ (pressCount === 3) {

                } ~&6503784146&~ ~&5972376&~ (pressCount === 4) {

                } ~&6503784146&~ ~&5972376&~ (pressCount > 4) {
                ~&214640042348&~();
                }
            }
        }


        ~&214604601930&~ {
            ~&5972374&~: holdTimer
            ~&7713147298280334&~: 300
            ~&7083121289162&~: ~&214625660372&~
            ~&495358363329399331&~: {
            buttonWasHeld = ~&6504329801&~;
            multipleClickTimer.~&6504295855&~();
            multipleClickTimer.~&214640042348&~();
        }
    }
}
END TRAVERSE
END AFFECT

